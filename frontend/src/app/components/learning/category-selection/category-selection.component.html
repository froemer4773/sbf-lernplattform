<div class="category-selection-container">
  <div class="header">
    <a [routerLink]="['/dashboard']" class="back-link">← Zurück</a>
    <h1>Lernbereich</h1>
    <p>Wähle einen Führerschein und eine Kategorie zum Lernen</p>
  </div>

  @if (error(); as errorMsg) {
    <div class="error-message">
      {{ errorMsg }}
      <button (click)="loadLicenses()">Erneut versuchen</button>
    </div>
  }

  @if (loading()) {
    <div class="loading">
      <p>Lädt Daten...</p>
    </div>
  } @else {
    <div class="content">
      <!-- Lizenz-Auswahl -->
      <div class="licenses-section">
        <h2>Führerscheinart</h2>
        <div class="licenses-grid">
          @for (license of licenses(); track license.name) {
            <button
              class="license-button"
              [class.active]="selectedLicense() === license.name"
              (click)="selectLicense(license)"
            >
              {{ license.name }}
            </button>
          }
        </div>
      </div>

      <!-- Unterkategorien -->
      @if (subcategories().length > 0) {
        <div class="categories-section">
          <h2>Unterkategorien für {{ selectedLicense() }}</h2>
          <div class="categories-grid">
            @for (subcategory of subcategories(); track subcategory.kategorie + '_' + subcategory.unterkategorie) {
              <a
                [routerLink]="['/learning/questions', selectedLicense(), subcategory.kategorie]"
                [queryParams]="{unterkategorie: subcategory.unterkategorie}"
                class="category-card"
              >
                <h3>{{ subcategory.unterkategorie }}</h3>
              </a>
            }
          </div>
        </div>
      }
    </div>
  }
</div>
